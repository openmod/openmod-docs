<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Making your first plugin | OpenMod Docs </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Making your first plugin | OpenMod Docs ">
    <meta name="generator" content="docfx 2.56.6.0">
    
    <link rel="shortcut icon" href="../../favicon.ico">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/night-owl.min.css">
    <link rel="stylesheet" href="../../styles/colors.css">
    <link rel="stylesheet" href="../../styles/discord.css">
    <link rel="stylesheet" href="../../styles/main.css">
    <meta property="docfx:navrel" content="../../toc.html">
    <meta property="docfx:tocrel" content="../toc.html">
    
    <meta property="docfx:rel" content="../../">
    
  </head>

  <body>
        <div class="top-navbar">

            <a href="javascript:void(0);" class="burger-icon" onclick="toggleMenu()">
                <svg name="Hamburger" style="vertical-align: middle;" width="24" height="24" viewbox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" clip-rule="evenodd" d="M20 6H4V9H20V6ZM4 10.999H20V13.999H4V10.999ZM4 15.999H20V18.999H4V15.999Z"></path></svg>
            </a>

            
            <a class="brand" href="../../index.html">
              <img src="../../logo.png" alt="OpenMod Docs" class="logomark">
              <span class="brand-title">OpenMod Docs</span>
            </a>
        </div>

        <div class="body-content">

            <div id="blackout" class="blackout" onclick="toggleMenu()"></div>

            <nav id="sidebar" role="navigation">

                <div class="sidebar">
                    
                    
                    
                    
                    <div>
                      
                      <a class="brand" href="../../index.html">
                        <img src="../../logo.png" alt="OpenMod Docs" class="logomark">
                        <span class="brand-title">OpenMod Docs</span>
                      </a>
                      <div id="navbar">
                    
                      </div>
                    
                    </div>


                    <div class="sidebar-item-separator"></div>

                        
                        <div id="sidetoggle">
                          <div id="sidetoc"></div>
                        </div>

                </div>

                <div class="footer">
                  OpenMod .NET Plugin Framework.
                  
                </div>
            </nav>

            <main class="main-panel">

                <div role="main" class="hide-when-search">

                        
                        <div class="subnav navbar navbar-default">
                          <div class="container hide-when-search" id="breadcrumb">
                            <ul class="breadcrumb">
                              <li></li>
                            </ul>
                          </div>
                        </div>

                    <article class="content wrap" id="_content" data-uid="">
<h1 id="making-your-first-plugin">Making your first plugin</h1>

<p>In this guide we will cover:</p>
<ol>
<li>Setting up the development environment.</li>
<li>Creating a plugin project.</li>
<li>Writing a basic plugin.</li>
</ol>
<h2 id="installing-the-net-5-sdk">Installing the .NET 5 SDK</h2>
<p>Install the latest .NET 5 SDK from <a href="https://dotnet.microsoft.com/download/dotnet/5.0">here</a> (you should get a <code>dotnet-sdk-xxxxx.exe</code>).</p>
<h2 id="installing-the-ide">Installing the IDE</h2>
<p>After setting up the .NET Core SDK, you will need an IDE. The IDE provides you with the environment and tools for coding plugins.</p>
<h3 id="visual-studio-code-recommended">Visual Studio Code (recommended)</h3>
<p>You can use <a href="https://code.visualstudio.com/">Visual Studio Code</a> for developing OpenMod plugins. It supports Linux, macOS, and Windows. Visual Studio Code is the recommended solution for small to mid-sized projects.</p>
<h3 id="visual-studio">Visual Studio</h3>
<p>If you want a full IDE experience, download and install <a href="https://visualstudio.microsoft.com/vs/community/">Visual Studio Community Edition</a>. Visual Studio is only supported on the Windows platform. When the installer starts, select &quot;Visual Studio 2019 Community Edition&quot; (or newer, if available). After that select the &quot;.NET Core cross-platform development&quot; and the &quot;.NET Desktop Development&quot; options as shown below.</p>
<p><img src="https://docs.microsoft.com/en-us/visualstudio/install/media/vs2017-modify-workloads.png?view=vs-2017g" alt="Selecting .NET desktop development option"></p>
<p><img src="https://static.packt-cdn.com/products/9781787281905/graphics/image_05_002.png" alt="Selecting .NET Core cross-platform development option"></p>
<h3 id="rider">Rider</h3>
<p>If you are using Linux and do not want to use Visual Studio Code, you can install <a href="https://www.jetbrains.com/rider/">Rider</a>. Although it is a commercial product, it can be obtained for free when applying for a Jetbrains Student License. Like Visual Studio, it provides a full IDE experience and has similar capabilities.</p>
<h2 id="generating-the-plugin-project">Generating the Plugin Project</h2>
<p>Start cmd or Powershell and navigate to the folder where you want to create the plugin project.</p>
<p>E.g.</p>
<pre><code>mkdir C:\Users\&lt;Username&gt;\source\repos\MyPlugin\
cd C:\Users\&lt;Username&gt;\source\repos\MyPlugin\
</code></pre>
<p>After that, install the OpenMod Plugin Templates for the .NET Core SDK:</p>
<pre><code>dotnet new -i &quot;OpenMod.Templates::*&quot;
</code></pre>
<p>Finally, you can generate the plugin project with this command:</p>
<pre><code>dotnet new openmod-universal-plugin --PluginId &lt;PluginId&gt; [--FullPluginName &lt;FullPluginName&gt;]
</code></pre>
<p>or, if you want to develop a plugin for Unturned:</p>
<pre><code>dotnet new openmod-unturned-plugin --PluginId &lt;PluginId&gt; [--FullPluginName &lt;FullPluginName&gt;]
</code></pre>
<p><code>PluginId</code> must be a unique identifier for your plugin. By convention, it is the same as the NuGet package ID.<br>
<code>FullPluginName</code> is optional and will set how your plugin should be displayed to the user.</p>
<p>To get the full help for the command, you can use the --help switch like this:</p>
<pre><code>dotnet new openmod-universal-plugin --help
</code></pre>
<p>or, for Unturned:</p>
<pre><code>dotnet new openmod-unturned-plugin --help
</code></pre>
<p><strong>Example</strong>
If you want to create an Unturned plugin project, you can use the following command:</p>
<pre><code>dotnet new openmod-unturned-plugin --FullPluginName &quot;My Unturned Plugin&quot; --PluginId &quot;MyName.MyUnturnedPlugin&quot;
</code></pre>
<h2 id="adding-a-basic-command">Adding a basic command</h2>
<p>Now that you've set up your plugin, open the .csproj file with the IDE you have installed earlier.</p>
<p>In this example we are creating an echo command. Create a new class (how you do this depends on your IDE). By convention command classes are prefixed with &quot;Command&quot; so call it CommandEcho. Since this will be an universal command that works on all platforms, we will make it inherit from <code>Command</code>. If this command would be only for Unturned, we would inherit from <code>UnturnedCommand</code> instead.</p>
<p>This is what your class should look like:</p>
<pre><code class="lang-c#">public class CommandEcho : Command
{
}
</code></pre>
<p>Let's go ahead and fix the error by implementing the method <code>ExecuteAsync()</code> and a constructor. For now, do not worry about what async is. This is going to be the method that executes what you want your command to perform.</p>
<p>So now, you will be wanting to know how you can access the in-game data and methods. You can access the command context without the parameters, by simply using Context (this comes from using the Command abstract class).
This will allow you to access the Player, from now it is quite easy, let's see a finished product of this command.</p>
<pre><code class="lang-c#">[Command(&quot;echo&quot;)]
[CommandDescription(&quot;Echo a message&quot;)]
[CommandSyntax(&quot;&lt;message&gt;&quot;)]
public class CommandEcho : Command
{
    public CommandEcho(IServiceProvider serviceProvider) : base(serviceProvider)
    {
            
    }

    protected override async Task OnExecuteAsync()
    {        
        // This gets us the text that the user wants to echo.
        string text = string.Join(&quot; &quot;, Context.Parameters);
            
        await Context.Actor.PrintMessageAsync(text);
    }
}
</code></pre>
<p>OnExecuteAsync is getting called by the command executor and provides you with the commands &quot;context&quot;. At the top of the class, you will see we are setting our command metadata using attributes.</p>
<p>For more, visit the <a href="../concepts/commands.html">commands documentation</a>.</p>
<h2 id="best-practices">Best Practices</h2>
<div class="CAUTION">
<h5>Caution</h5>
<p><strong>Do not</strong> use static plugin instances, instead always pass instances by reference. OpenMod dynamically creates and destroys your plugin instances, which would result in wrong instances being used after reloads.
Here is a bad example:</p>
<pre><code class="lang-c#">public static MyPlugin Instance { get; set; }
public class MyCommand : Command
{
     public MyCommand(IServiceProvider serviceProvider) : base(serviceProvider)
     {
     }

     public async Task OnExecuteAsync()
     {
         MyPlugin.Instance.DoSomething();
     }
}
</code></pre>
<p>Use this instead:</p>
<pre><code class="lang-cs">public class MyCommand : Command
{
     private readonly MyPlugin m_MyPlugin;

     public MyCommand(
         MyPlugin myPlugin,
         IServiceProvider serviceProvider) : base(serviceProvider)
     {
         m_MyPlugin = myPlugin;
     }

     public async Task OnExecuteAsync()
     {
         m_MyPlugin.DoSomething();
     }
}
</code></pre>
</div>
</article>
              
                </div>
            </main>
        </div>

        
<script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js" integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI" crossorigin="anonymous"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js"></script>
<script type="text/javascript" src="../../styles/jquery.twbsPagination.js"></script>
<script type="text/javascript" src="../../styles/url.min.js"></script>
<!--<script src="https://cdn.jsdelivr.net/npm/anchor-js/anchor.min.js"></script>-->
<script type="text/javascript" src="../../styles/docfx.js"></script>
<script type="text/javascript" src="../../styles/main.js"></script>

    </body>

</html>
