<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Publishing to nuget.org | OpenMod Docs </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Publishing to nuget.org | OpenMod Docs ">
    <meta name="generator" content="docfx 2.56.6.0">
    
    <link rel="shortcut icon" href="../../favicon.ico">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/night-owl.min.css">
    <link rel="stylesheet" href="../../styles/colors.css">
    <link rel="stylesheet" href="../../styles/discord.css">
    <link rel="stylesheet" href="../../styles/main.css">
    <meta property="docfx:navrel" content="../../toc.html">
    <meta property="docfx:tocrel" content="../toc.html">
    
    <meta property="docfx:rel" content="../../">
    
  </head>

  <body>
        <div class="top-navbar">

            <a href="javascript:void(0);" class="burger-icon" onclick="toggleMenu()">
                <svg name="Hamburger" style="vertical-align: middle;" width="24" height="24" viewbox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" clip-rule="evenodd" d="M20 6H4V9H20V6ZM4 10.999H20V13.999H4V10.999ZM4 15.999H20V18.999H4V15.999Z"></path></svg>
            </a>

            
            <a class="brand" href="../../index.html">
              <img src="../../logo.png" alt="OpenMod Docs" class="logomark">
              <span class="brand-title">OpenMod Docs</span>
            </a>
        </div>

        <div class="body-content">

            <div id="blackout" class="blackout" onclick="toggleMenu()"></div>

            <nav id="sidebar" role="navigation">

                <div class="sidebar">
                    
                    
                    
                    
                    <div>
                      
                      <a class="brand" href="../../index.html">
                        <img src="../../logo.png" alt="OpenMod Docs" class="logomark">
                        <span class="brand-title">OpenMod Docs</span>
                      </a>
                      <div id="navbar">
                    
                      </div>
                    
                    </div>


                    <div class="sidebar-item-separator"></div>

                        
                        <div id="sidetoggle">
                          <div id="sidetoc"></div>
                        </div>

                </div>

                <div class="footer">
                  OpenMod .NET Plugin Framework.
                  
                </div>
            </nav>

            <main class="main-panel">

                <div role="main" class="hide-when-search">

                        
                        <div class="subnav navbar navbar-default">
                          <div class="container hide-when-search" id="breadcrumb">
                            <ul class="breadcrumb">
                              <li></li>
                            </ul>
                          </div>
                        </div>

                    <article class="content wrap" id="_content" data-uid="">
<h1 id="publishing-to-nugetorg">Publishing to nuget.org</h1>

<p>If you want your plugin to be installable from <code>openmod install</code>, you will need to publish it to nuget.org.<br>
You will need a Microsoft account for <a href="https://www.nuget.org/">nuget.org</a>.</p>
<h2 id="preparing-your-plugin-for-nuget">Preparing your plugin for NuGet</h2>
<p>Step 1: Add the following to your plugins .csproj:</p>
<pre><code class="lang-xml">&lt;PropertyGroup&gt;
  &lt;PackageId&gt;Your PackageId&lt;/PackageId&gt; &lt;!-- must be unique, should be same as your plugin ID --&gt;
  &lt;PackageDescription&gt;Your plugin description&lt;/PackageDescription&gt;
  &lt;PackageLicenseExpression&gt;Your License&lt;/PackageLicenseExpression&gt; &lt;!-- see https://spdx.org/licenses/ --&gt;
  &lt;PackageAuthor&gt;Your name&lt;/PackageAuthor&gt;
  &lt;PackageTags&gt;openmod openmod-plugin XXX&lt;/PackageTags&gt; &lt;!-- XXX can be unturned, unityengine or universal depending on your plugin --&gt;
  &lt;Version&gt;x.x.x&lt;/Version&gt; &lt;!-- Your plugins version. Must be semversion, see https://semver.org/ --&gt;
  &lt;GeneratePackageOnBuild&gt;true&lt;/GeneratePackageOnBuild&gt;
  &lt;GenerateNugetPackage&gt;true&lt;/GenerateNugetPackage&gt;  
&lt;/PropertyGroup&gt;
</code></pre>
<p>Step 2: Sign in to <a href="https://nuget.org">nuget.org</a>.<br>
Step 3: Click on your username, select API Keys.<br>
Step 4: Select &quot;Create&quot;. Add a name, select the <code>Push</code> scope and add <code>*</code> as Glob pattern, then select create.<br>
Step 5: Copy your newly created key. Save your key securely as you cannot retrieve it again.</p>
<h2 id="uploading-the-plugin">Uploading the plugin</h2>
<p>Step 1: Navigate to your plugins folder. Execute the following command: <code>dotnet build --configuration Release</code>.<br>
Step 2: Go to <code>bin/Release/</code> and push to NuGet:<br>
<code>dotnet push &lt;yourpackageid.x.x.x.nupkg&gt; -n -k &lt;your nuget.org key&gt; -s https://api.nuget.org/v3/index.json</code></p>
<p>You can now install your plugin with <code>openmod install &lt;YourPackageId&gt;</code>.</p>
<div class="NOTE">
<h5>Note</h5>
<p>You may get the &quot;PackageOrVersionNotFound&quot; error after trying to install your plugin. This means your upload has not  been verified or indexed yet. It may take up to an hour until uploads to nuget.org are verified and indexed.</p>
</div>
<p>For more, read the <a href="https://docs.microsoft.com/en-us/nuget/nuget-org/publish-a-package">Publishing packages</a> and <a href="https://docs.microsoft.com/en-us/nuget/quickstart/create-and-publish-a-package-using-the-dotnet-cli">Create and publish a NuGet package (dotnet CLI)</a> pages on docs.microsoft.com.</p>
<h2 id="plugin-versioning">Plugin versioning</h2>
<p>Like OpenMod, NuGet also uses Semantic Versioning 2.0.0.</p>
<p>Here is a short summary on how versioning works:</p>
<ul>
<li>Semantic Versioning follow the following template: <code>Major.Minor.Patch</code>.</li>
<li>First Major is compared, then Minor and finally Patch. So <code>3.0.1</code> &gt; <code>2.1.5</code> &gt; <code>1.45.8</code>  &gt; <code>0.999.0</code> &gt; <code>0.99.0</code>.</li>
<li>Your plugin starts with version <code>0.1.0</code> and increments the &quot;Minor&quot; version as it progresses towards release (e.g. <code>0.2.0</code>).</li>
<li>When your plugin is ready for release, version <code>1.0.0</code> is used.</li>
<li>For bug fixes, increase the &quot;Patch&quot; version (e.g. <code>1.0.1</code>).</li>
<li>For new feature additions, increase the &quot;Minor&quot; version (e.g. <code>1.1.0</code>).</li>
<li>For breaking changes (e.g. public API changes or breaking configs, etc.), increment the Major version (e.g. <code>2.0.0</code>).</li>
<li>You can also use -rc1, -beta, -alpha, -beta2 etc. suffixes to indicate a pre release version (e.g. <code>2.0.0-rc1</code>)<br>
In this case version comparison is done alphabetically, e.g. <code>1.0.0-rc2</code> is newer than <code>1.0.0-rc1</code> and <code>1.0.0-beta</code>, but <code>1.0.0</code> is the newest because it is not a pre release version.</li>
<li>You can attach any arbitary information, such as the commit hash, by using the + suffix (e.g. <code>1.0.0+525ffaa</code> or <code>1.0.0-rc1+525ffaa</code>). Everything after the + is ignored and not used for version comparison.</li>
</ul>
<p>The following are valid semantic version examples:</p>
<ul>
<li><code>0.0.1</code></li>
<li><code>1.0.9</code></li>
<li><code>1.45.6</code></li>
<li><code>1.0.0-alpha</code></li>
<li><code>1.0.0-beta1</code></li>
<li><code>1.3.5-rc1</code></li>
<li><code>1.3.5-rc2+somearbitaryinformation</code></li>
</ul>
<p>The following are <strong>not valid</strong>:</p>
<ul>
<li><code>1.0.0.0</code></li>
<li><code>v1.0.0</code></li>
</ul>
<p>For more information, check out the <a href="https://semver.org">semantic versioning website</a>.</p>
<h2 id="publishing-with-github-workflows">Publishing with GitHub workflows</h2>
<p>You can use GitHub workflows to publish to NuGet with one click.</p>
<p>The following assumes that your plugins source code is in the <code>YOURPLUGIN</code> folder under your repositories root directory.<br>
Create the following file in your repository's <code>.github/workflows</code> folder.</p>
<pre><code class="lang-yaml">name: Deployment

on:
  workflow_dispatch:
    inputs:
      version:
        description: 'Plugin Version (SemVer: https://semver.org)'
        required: true
jobs:
  deploy:
    name: &quot;NuGet Deployment&quot;
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v2
      name: Checkout Repository
      with:
        fetch-depth: 0
    - name: Setup .NET
      uses: actions/setup-dotnet@v1
      with:
        dotnet-version: 5.0.x
    - name: Install dependencies
      run: dotnet restore
    - name: Update version
      run: &quot;sed -i \&quot;s#&lt;Version&gt;0.0.0&lt;/Version&gt;#&lt;Version&gt;${{ github.event.inputs.version }}&lt;/Version&gt;#\&quot; YOURPLUGIN/YOURPLUGIN.csproj&quot;  
    - name: Update package version
      run: &quot;sed -i \&quot;s#&lt;PackageVersion&gt;0.0.0&lt;/PackageVersion&gt;#&lt;PackageVersion&gt;${{ github.event.inputs.version }}&lt;/PackageVersion&gt;#\&quot; YOURPLUGIN/YOURPLUGIN.csproj&quot;  
    - name: Update informational version
      run: &quot;sed -i \&quot;s#&lt;InformationalVersion&gt;0.0.0&lt;/InformationalVersion&gt;#&lt;InformationalVersion&gt;${{ github.event.inputs.version }}&lt;/InformationalVersion&gt;#\&quot; YOURPLUGIN/YOURPLUGIN.csproj&quot;              
    - name: Build
      run: dotnet build YOURPLUGIN/YOURPLUGIN.csproj --configuration Release --no-restore
    - name: Push to NuGet
      run: dotnet nuget push YOURPLUGIN/bin/Release/*.nupkg
             --api-key ${{ secrets.NUGET_DEPLOY_KEY }}
             --source https://api.nuget.org/v3/index.json
</code></pre>
<p>After that you must edit the <code>&lt;Version&gt;x.x.x&lt;/Version&gt;</code> in your .csproj and set it to <code>&lt;Version&gt;0.0.0&lt;/Version&gt;</code>. Also add <code>&lt;PackageVersion&gt;0.0.0&lt;/PackageVersion&gt;</code> and <code>&lt;InformationalVersion&gt;0.0.0&lt;/InformationalVersion&gt;</code>.</p>
<p>Finally, to finish setting up the workflow, you must add your NuGet secret:</p>
<ul>
<li>Go to <a href="https://github.com/YOURNAME/YOURPLUGIN/settings/secrets">https://github.com/YOURNAME/YOURPLUGIN/settings/secrets</a></li>
<li>Create a new secret</li>
<li>Name it &quot;NUGET_DEPLOY_KEY&quot; and add your NuGet API Key to it</li>
</ul>
<p>To publish a new version of your plugin, all you have to do is to:</p>
<ul>
<li>Go to your repository on GitHub</li>
<li>Click on &quot;Actions&quot;</li>
<li>Select &quot;NuGet Deployment&quot; on the left</li>
<li>Click on &quot;Run workflow&quot; on the right</li>
<li>Enter plugin version and be sure to follow the versioning rules from above, then click &quot;Run workflow&quot;.</li>
<li>Check the workflow log if any error occured.</li>
<li>Done, your plugin has been built and uploaded to nuget.org.</li>
</ul>
<p>Here is an example from the <a href="https://github.com/Kr4ken-9/NewEssentials">NewEssentials</a> plugin made by Kr4ken:
<img src="https://i.imgur.com/MumDQS5.png" alt="GitHub workflow NuGet deployment example"></p>
<p>It takes about 10-30 minutes for your plugin to be published to nuget.org. After waiting you can use <code>openmod install &lt;YourPluginsPackageId&gt;</code> to install your plugin.</p>
</article>
              
                </div>
            </main>
        </div>

        
<script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js" integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI" crossorigin="anonymous"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js"></script>
<script type="text/javascript" src="../../styles/jquery.twbsPagination.js"></script>
<script type="text/javascript" src="../../styles/url.min.js"></script>
<!--<script src="https://cdn.jsdelivr.net/npm/anchor-js/anchor.min.js"></script>-->
<script type="text/javascript" src="../../styles/docfx.js"></script>
<script type="text/javascript" src="../../styles/main.js"></script>

    </body>

</html>
